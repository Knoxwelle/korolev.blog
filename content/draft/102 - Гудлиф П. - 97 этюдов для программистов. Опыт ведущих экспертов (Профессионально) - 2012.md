+++
title='102 - Гудлиф П. - 97 этюдов для программистов. Опыт ведущих экспертов (Профессионально) - 2012'
date=2024-07-10T00:00:00-07:00
draft=true
categories=[]
tags=[]
cover_image='/images/cover/knoxwelle__2021-08-08T051054.000Z.jpg'
+++
Рэнди Стэффорд
Вре­мя от­кли­ка име­ет кри­ти­че­ское зна­че­ние для эр­го­но­ми­ки про­грамм. Мало 
что так раздражает, как ожидание ответа программной системы, особенно если 
взаимодействие с ней состоит из повторяющихся циклов воздействия и отклика1
. Возникает ощущение, будто программа крадет у вас время и снижает продуктивность. Однако причины замедленного отклика программисты осознают 
не всегда, особенно в современных приложениях. В литературе, посвященной 
контролю производительности, по-прежнему много внимания уделяется структурам данных и алгоритмам, то есть вопросам, способным оказывать влияние 
на производительность в некоторых случаях, но едва ли в современных многоуровневых приложениях корпоративного уровня.
Мой опыт показывает, что когда в таких приложениях возникает проблема производительности, поиски ее решения следует начинать не с изучения структур 
данных и алгоритмов. Время отклика больше всего зависит от количества взаимодействий между удаленными процессами (interprocess communications, IPC), 
осуществляемых в ответ на воздействие. Да, встречаются и другие локальные 
узкие места, но число взаимодействий между удаленными процессами обычно 
имеет решающее значение. Каждое взаимодействие между удаленными процессами добавляет некоторую ненулевую задержку в общее время отклика, и эти 
отдельные добавки суммируются, особенно если возникают последовательно.
Каноническим примером служит пульсирующая нагрузка в приложениях, использующих объектно-реляционное отображение (ORM). Пульсирующая нагрузка описывает последовательное выполнение множественных обращений 
к базе данных для чтения данных, необходимых для построения графа объектов 
1 Автор использует в статье биологические термины «раздражитель» (stimulus) и «реакция» (response) в применении к программному обеспечению. В данной статье под 
термином «воздействие» понимается взаимодействие пользователя с системой («раздражитель»), которое запускает определенные ответные действия в системе («отклик»). – Прим. науч. ред.
Межпроцессная коммуникация 
влияет на время отклика 
приложенияМежпроцессная коммуникация влияет на время отклика приложения 103
(см. шаблон Lazy Load1 в книге Мартина Фаулера «Patterns of Enterprise Application Architecture»2, Addison-Wesley Professional). Когда клиентом базы данных является сервер приложений промежуточного уровня (middle-tier), который компонует веб-страницу, обращения к базе данных обычно происходят последовательно в едином потоке. Их периоды ожидания суммируются, образуя 
суммарное время отклика. Даже если каждое обращение к базе данных длится 
всего 10 мс, страница, требующая 1000 обращений (что не редкость), появится 
с задержкой не менее чем в 10 секунд. Другими примерами могут служить обращение к веб-службам, HTTP-запросы веб-браузера, вызов распределенных объектов, шаблон связи «запрос-ответ» и взаимодействие с таблицей данных по специальным сетевым протоколам. Чем больше удаленных IPC требуется для ответа на воздействие, тем большим будет время отклика.
Существует ряд относительно очевидных и широко известных стратегий сокращения количества взаимодействий между удаленными процессами в расчете на 
одно воздействие. Одна из таких стратегий заключается в применении принципа бережливости – мы можем оптимизировать интерфейс между процессами, 
чтобы передавались только те данные, которые нужны непосредственно, а объем 
взаимодействия был минимален. Другая стратегия – как можно более широкое 
распараллеливание связей между процессами, чтобы общее время отклика определялось в основном IPC с наибольшей задержкой. Третья стратегия – кэшировать результаты предшествующих IPC, чтобы в будущем вместо IPC использовать обращение к локальному кэшу.
Проектируя приложение, следите за количеством взаимодействий между процессами, происходящих в ответ на каждое воздействие. Анализируя приложения с низкой производительностью, я часто сталкивался с тем, что отношение 
количества IPC к воздействию составляет 1000:1 и больше. Сокращение этого 
отношения путем кэширования, распараллеливания или других приемов даст 
значительно больший эффект, чем изменение структуры данных или модификация алгоритма сортировки.
1 http://martinfowler.com/eaaCatalog/lazyLoad.html.
2 Мартин Фаулер др. «Шаблоны корпоративных приложений». – Пер. с англ. – Вильямс, 2010.