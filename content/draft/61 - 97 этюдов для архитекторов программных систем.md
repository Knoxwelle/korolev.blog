+++
title='База данных как Крепость'
date=2024-07-10T00:00:00-07:00
draft=true
categories=[]
tags=[]
cover_image='/images/cover/knoxwelle__2021-08-08T051054.000Z.jpg'
+++
База данных как Крепость
Дэн Чак
В базе данных хранится вся информация – как вводимая сотрудниками, так
и полученная от клиентов. Пользовательские интерфейсы, бизнес-логика
и прикладная логика (и даже сотрудники) приходят и уходят, а данные
остаются. Трудно выразить словами то, насколько важно в первые же дни
работы над проектом построить надежную модель данных.
Огромная популярность методологий гибкой разработки привела многих
к мысли, что приложения можно (и даже предпочтительно!) проектировать
по ходу работы. Эпоха предварительного написания сложных, исчерпывающих технических спецификаций ушла навсегда! Новая школа призывает
поставлять продукт рано и часто. Одна строка эксплуатируемого кода полезнее 10 строк у вас в голове. Звучит слишком хорошо, чтобы быть правдой…
во всяком случае в том, что касается данных.
В то время как бизнес-логика и пользовательские интерфейсы эволюционируют довольно быстро, структурам данных и их отношениям это обычно не
свойственно. Следовательно, очень важно с самого начала четко определить
модель данных как на структурном, так и на аналитическом уровнях. Миграция данных из одной схемы в другую «на месте» в лучшем случае сложна,
всегда занимает много времени и часто чревата ошибками. Если с ошибками уровня приложения еще можно какое-то время мириться, ошибки в базе
данных могут привести к катастрофическим последствиям. Даже если вы
нашли и исправили ошибку проектирования на уровне данных, это не восстановит поврежденную информацию.
Надежная модель данных – это такая модель, которая гарантирует безопасность сегодняшних данных и может расширяться для данных завтрашних.
Гарантировать безопасность означает обеспечить неуязвимость для ошибок,
которые все равно (сколько бы усилий вы ни приложили) проникнут в вечноБаза данных как Крепость 
изменяющийся прикладной уровень; поддерживать ссылочную целостность
данных; задавать ограничения предметной области везде, где они известны;
выбирать подходящие ключи, которые помогут обеспечить ссылочную целостность и соблюдение ограничений. Обеспечить расширяемость означает
правильно нормализовать данные, чтобы модель данных можно было легко
дополнить новыми архитектурными уровнями, не прибегая к использованию всевозможных лазеек и обходных путей.
База данных – последний страж, охраняющий ваши драгоценные данные.
Прикладной уровень, эфемерный по своей природе, не может следить за собой сам. Для того чтобы база данных обеспечивала необходимую защиту,
модель данных нужно спроектировать так, чтобы она отвергала неподходящие данные и не позволяла создавать отношения, не имеющие смысла.
Ключи, отношения по внешнему ключу и ограничения предметной области,
описанные в схеме, лаконичны, понятны, легко проверяются и в конечном
итоге самодокументируемы. Правила предметной области, закодированные
в модели данных, также имеют физический, долгосрочный характер; они не
теряются при изменениях в логике приложения.
Чтобы извлечь из реляционной базы данных максимальную пользу, то есть
сделать ее полноценной частью приложения, а не просто хранилищем данных приложения, необходимо с самого начала хорошо понимать, что же
вы создаете. По мере развития вашего продукта будет совершенствоваться
и уровень данных, но в каждой фазе развития он должен сохранять свой
статус Крепости. И тогда вы сможете довериться ему и с уверенностью возложить на него ответственность за перехват ошибок с других уровней приложения – и он вас не разочарует.
Дэн Чак (Dan Chak) – директор по разработке ПО в CourseAdvisor Inc., 
компании Washington Post. Является автором книги «Enterprise Rails» 
(O’Reilly).