+++
title='112 - Гудлиф П. - 97 этюдов для программистов. Опыт ведущих экспертов (Профессионально) - 2012'
date=2024-07-10T00:00:00-07:00
draft=true
categories=[]
tags=[]
cover_image='/images/cover/knoxwelle__2021-08-08T051054.000Z.jpg'
+++
Грег Колвин 
Нужно знать предел своих возможностей.
«Грязный Гарри»
Ва­ши ре­сур­сы ог­ра­ни­че­ны. Отведенные на выполнение работы время и деньги 
определены конкретно, в том числе время и деньги, необходимые для поддержания ваших знаний, навыков и инструментов на современном уровне. Существует предел интенсивности, скорости, изобретательности и длительности для вашей работы. Возможности ваших инструментов ограничены. Мощность машин, 
для которых вы пишете программы, ограничена. Поэтому вы должны учитывать пределы своих ресурсов.
Как учесть эти границы? Нужно знать себя, своих сотрудников, свой бюджет 
и свою технику. Инженеру-программисту нужно знать пространственно-временную сложность своих структур данных и алгоритмов, архитектуру и показатели производительности своих систем. Ваша задача – создать оптимальное 
сочетание программного обеспечения и систем.
Пространственная и временная сложность задаются в виде функции O(f(n)), где 
n равно размеру входных данных. Эта функция определяет асимптотическое поведение памяти или времени для n, стремящегося 
к бесконечности. Важные классы сложности для 
f(n) – это ln(n), n, n ln(n), ne
 и en. Как ясно видно из 
графиков этих функций, когда n растет, O(ln(n)) 
становится гораздо меньше O(n) и O(n ln(n)), а те, 
в свою очередь, становятся гораздо меньше O(ne
) 
иO(en
). Вформулировке Шона Пэрента (Sean Parent): 
для практически достижимых n все классы сложности близки к функциям констант, линейным 
либо бесконечным.
Анализ сложности осуществляется в терминах некой абстрактной машины, но программы работают 
Знай свои возможности
1
2
3
4
5
6
7
8
9
10
1 1 2 3 4 5 6 7
x
y
en ne n ln(n)
ln(n)
n
0 8 9 10 11Знай свои возможности 113
на реальных компьютерах. Современные 
компьютерные системы образуют целые иерархии физических и виртуальных машин, 
включающие библиотеки времени выполнения для языков программирования, операционные системы, процессоры, кэш-память, оперативную память, жесткие диски 
и сети. В приведенной таблице показаны 
пределы времени произвольного доступа 
к данным и пределы емкости памяти для 
типичного сервера, подключенного к сети.
Заметим, что вариативность памяти и скорости составляет несколько порядков. 
Для компенсации различий на всех уровнях системы интенсивно применяется 
кэширование и упреждающий просмотр, но они действенны только тогда, когда 
доступ предсказуем. Если часто происходят кэш-промахи, система будет тормозить. Например, случайное чтение каждого байта на жестком диске может занять 32 года. Даже случайное чтение каждого байта оперативной памяти может 
занять 11 минут. Случайный доступ непредсказуем. А что предсказуемо? Зависит от системы, но обычно выигрыш приносят повторный доступ к недавно считанным данным и последовательный доступ к элементам данных.
Алгоритмы и структуры данных различаются эффективностью использования 
кэша. Например:
• Линейный поиск эффективно использует упреждающий просмотр, но требует O(n) сравнений.
• Двоичный поиск в отсортированном массиве требует всего O(log(n)) сравнений.
• Поиск по дереву ван Эмде Боаса (van Emde Boas) имеет сложность O(log(n)) 
и нечувствителен к кэшу.
Что выбрать? Для окончательного анализа нужны измерения. В таблице ниже 
показано время поиска в массивах 64-разрядных целых чисел с помощью этих 
трех методов. На моем компьютере:
• Линейный поиск составляет конкуренцию другим методам на малых массивах, но проигрывает экспоненциально 
на больших.
• Поиск ван Эмде Боаса побеждает без вариантов благодаря схеме предсказуемого доступа.
Каждый сам решает, что для него лучше.
— Punch
Время доступа Емкость
Регистр <1 нс 64 бит
Уровень кэша 64 байт
 Кэш L1 1 нс 64 килобайт
 Кэш L2 4 нс 8 мегабайт
ОЗУ 20 нс 32 гигабайт
Диск 10 мс 10 терабайт
Локальная сеть 20 мс >1 петабайт
Интернет 100 мс >1 зеттабайт
Время поиска (нс)
8 50 90 40
64 180 150 70
512 1200 230 100
4096 17000 320 160
Линейный Двоичный ван Эмде Боас