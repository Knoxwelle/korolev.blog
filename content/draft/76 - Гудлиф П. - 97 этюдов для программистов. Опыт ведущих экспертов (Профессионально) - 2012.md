+++
title='Верити Стоб'
date=2024-07-10T00:00:00-07:00
draft=true
categories=[]
tags=[]
cover_image='/images/cover/knoxwelle__2021-08-08T051054.000Z.jpg'
+++
Верити Стоб
Од­на­ж­ды я на­пи­са­ла оп­рос-ро­зы­грыш по C++, в котором в шутку предложила 
такую стратегию обработки исключений:
Путем размещения в коде многочисленных конструкций try...catch иногда 
удается избежать аварийного завершения программы. О полученном в результате состоянии можно сказать, что «тело прибито в вертикальном положении».
Несмотря на легкомыслие, я всего лишь излагала урок, извлеченный из Его Величества Горького Опыта.
То был базовый класс приложения в нашей самописной библиотеке C++. В коде 
класса многие годы ковырялись шаловливыми ручонками то один программист, 
то другой. Класс содержал код обработки исключений, ускользнувших от всех 
других обработчиков. Взяв пример с Йоссариана из «Уловки-22», мы решили 
или, скорее, нам показалось (слово «решили» предполагает больше мыслительных усилий, чем ушло на создание этого монстра), что экземпляр этого класса 
должен жить вечно или умереть в попытках это сделать. 
С этой целью мы сплели воедино множество обработчиков исключений. Мы смешали обработку структурированных исключений Windows с собственными исключениями (помните __try...__except в C++? Я тоже не помню). Когда неожиданно возникало исключение, мы вызывали методы снова, запихивая в них те 
же параметры. Когда я вспоминаю это, мне нравится думать, что, создавая вложенный обработчик try...catch внутри предложения catch другого обработчика, 
я испытывала смутное подозрение, что как-то случайно съехала с надежного 
шоссе хорошей практики на ароматную, но нездоровую дорогу к безумию. Впрочем, это я понимаю, скорее, задним умом.
Стоит ли говорить, что, когда возникали проблемы в приложениях, основанных 
на этом классе, приложения исчезали бесследно, словно жертвы мафии, сброшенные с причала. Не оставалось даже пузырей на воде в качестве подсказки о печальном происшествии, несмотря на наличие подпрограмм аварийной регистрации, отвечавших за протоколирование события. В конце концов – по прошествии 
Не прибивайте программу 
гвоздями к стенеНе прибивайте программу гвоздями к стене 77
немалого времени – мы критически переоценили свое творение и устыдились. 
Все это месиво мы заменили маленьким и надежным механизмом генерации отчета. Но тому предшествовал не один десяток критических сбоев приложения.
Я не стала бы отнимать у вас время этой историей, ибо трудно представить, что 
кто-то еще мог бы соперничать с нашей глупостью, но недавно в сети у меня случилась дискуссия с типом, академический чин которого предполагает большее 
понимание подобных вопросов. Обсуждался код на Java в удаленных транзакциях. Тип утверждал, что если в коде случился сбой, исключение должно быть перехвачено и блокировано на месте. («И что же с ним тогда делать? – спросила я. – 
Приготовить его на ужин?»)
Он процитировал правило проектировщиков пользовательских интерфейсов: 
ПОЛЬЗОВАТЕЛЬ НИКОГДА НЕ ДОЛЖЕН ВИДЕТЬ СООБЩЕНИЕ ОБ ИСКЛЮЧИТЕЛЬНОЙ СИТУАЦИИ, как будто это правило решает проблему, напиши 
его прописными буквами или как-то еще. Интересно, может, это он автор кода 
для банкоматов, прославившихся своими синими экранами смерти в некоторых 
чахлых блогах, и не получил ли он душевную травму на всю жизнь.
Во всяком случае, если вам доведется встретиться с ним, кивайте, улыбайтесь 
и не слушайте, пока будете бочком пробираться к двери.