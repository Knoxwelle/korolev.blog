(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 13.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     17091,        431]
NotebookOptionsPosition[     15043,        391]
NotebookOutlinePosition[     15451,        407]
CellTagsIndexPosition[     15408,        404]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell[BoxData[
 RowBox[{
  RowBox[{"fileList", "=", 
   RowBox[{"FileNames", "[", 
    RowBox[{"\"\<*.md\>\"", ",", 
     RowBox[{"File", "[", 
      RowBox[{"StringJoin", "[", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", 
        "\"\<content\\\\posts\>\""}], "]"}], "]"}]}], "]"}]}], 
  "\n"}]], "Input",
 CellChangeTimes->{{3.929377511216282*^9, 3.9293775228627305`*^9}, 
   3.929377588982523*^9, 3.929378331246873*^9},
 CellLabel->"In[4]:=",ExpressionUUID->"7241a640-e92e-4cb9-a883-fbb4ed6d4dc7"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"C:\\\\Users\\\\korol\\\\YandexDisk\\\\Hugo\\\\project\\\\\
tinydev\\\\content\\\\posts\\\\info 1.md\"\>", 
   ",", "\<\"C:\\\\Users\\\\korol\\\\YandexDisk\\\\Hugo\\\\project\\\\tinydev\
\\\\content\\\\posts\\\\info 2.md\"\>", 
   ",", "\<\"C:\\\\Users\\\\korol\\\\YandexDisk\\\\Hugo\\\\project\\\\tinydev\
\\\\content\\\\posts\\\\info.md\"\>"}], "}"}]], "Output",
 CellChangeTimes->{
  3.929378334193079*^9, 3.9293786562634754`*^9, 3.929378904457405*^9, 
   3.929378946482177*^9, {3.929379565494397*^9, 3.929379604346242*^9}, 
   3.9293796731980124`*^9, 3.929380818687726*^9, 3.9293809856567774`*^9, 
   3.9293811382594013`*^9, 3.929640668083852*^9, 3.929644250333177*^9, 
   3.9296444050874825`*^9, 3.9296448183223104`*^9, 3.9301539546071696`*^9, 
   3.930154033297897*^9, 3.9301540955063114`*^9, 3.9301542528701262`*^9, 
   3.930158368252249*^9, {3.9301585023515453`*^9, 3.9301585104394445`*^9}, {
   3.9301585821809363`*^9, 3.930158608790345*^9}, 3.930158726305622*^9, 
   3.9301589938477936`*^9, {3.930159049372521*^9, 3.9301590765016212`*^9}, 
   3.9301655060460663`*^9, 3.930165630060402*^9},
 CellLabel->"Out[4]=",ExpressionUUID->"faef13aa-483b-4a41-9d28-ffa3cd3e65d5"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"imageList", "=", 
   RowBox[{"FileNames", "[", 
    RowBox[{"\"\<*.jpg\>\"", ",", 
     RowBox[{"File", "[", 
      RowBox[{"StringJoin", "[", 
       RowBox[{
        RowBox[{"NotebookDirectory", "[", "]"}], ",", 
        "\"\<content\\\\images\\\\cover\>\""}], "]"}], "]"}]}], "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.9293776005863695`*^9, 3.929377613911529*^9}, {
  3.929377644974377*^9, 3.929377672388686*^9}, {3.92937806473219*^9, 
  3.9293780688008766`*^9}, {3.9293782231378717`*^9, 3.9293782239618206`*^9}, {
  3.929640622573132*^9, 3.929640627361034*^9}, {3.930158393134735*^9, 
  3.9301583942020164`*^9}, {3.9301656634949026`*^9, 
  3.9301656651222734`*^9}},ExpressionUUID->"6df45464-0afb-4d19-81ce-\
421adcd33e53"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"\n", 
  RowBox[{
   RowBox[{"For", "[", 
    RowBox[{
     RowBox[{"i", "=", "1"}], ",", 
     RowBox[{"i", "<=", 
      RowBox[{"Length", "[", "fileList", "]"}]}], ",", 
     RowBox[{"i", "++"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"file", "=", 
       RowBox[{"fileList", "[", 
        RowBox[{"[", "i", "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Print", "[", 
       RowBox[{"i", ",", "\"\<. \>\"", ",", "file"}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"txtFile", "=", 
       RowBox[{"FileNameJoin", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"DirectoryName", "[", "file", "]"}], ",", 
          RowBox[{"StringJoin", "[", 
           RowBox[{
            RowBox[{"FileBaseName", "[", "file", "]"}], ",", "\"\<.txt\>\""}],
            "]"}]}], "}"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"RenameFile", "[", 
       RowBox[{"file", ",", "txtFile"}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"content", "=", 
       RowBox[{"Import", "[", "txtFile", "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"header", "=", 
       RowBox[{"First", "[", 
        RowBox[{"StringCases", "[", 
         RowBox[{"content", ",", 
          RowBox[{"\"\<+++\>\"", "~~", "x___", "~~", "\"\<+++\>\""}]}], " ", 
         "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"!", 
         RowBox[{"StringContainsQ", "[", 
          RowBox[{
           RowBox[{"StringTrim", "[", 
            RowBox[{"First", "[", 
             RowBox[{"StringCases", "[", 
              RowBox[{"content", ",", 
               RowBox[{
                RowBox[{
                "\"\<cover_image='/images\>\"", "~~", "x___", "~~", 
                 "\"\<'\>\""}], " ", "->", "x"}]}], "]"}], "]"}], "]"}], ",", 
           "\"\</cover/\>\""}], "]"}]}], ",", 
        RowBox[{
         RowBox[{"RenameFile", "[", 
          RowBox[{"txtFile", ",", "file"}], "]"}], ";", 
         RowBox[{"Continue", "[", "]"}], ";"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"oldImage", "=", 
       RowBox[{"StringTrim", "[", 
        RowBox[{"First", "[", 
         RowBox[{"StringCases", "[", 
          RowBox[{"content", ",", 
           RowBox[{
            RowBox[{
            "\"\<cover_image='/images/cover/\>\"", "~~", "x___", "~~", 
             "\"\<'\>\""}], " ", "->", "x"}]}], "]"}], "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Print", "[", 
       RowBox[{"\"\<oldImage = \>\"", ",", " ", "oldImage"}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"newImage", "=", 
       RowBox[{"FileNameTake", "[", 
        RowBox[{"RandomChoice", "[", "imageList", "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Print", "[", 
       RowBox[{"\"\<newImage = \>\"", ",", "newImage"}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"newContent", "=", 
       RowBox[{"StringReplace", "[", 
        RowBox[{"content", ",", 
         RowBox[{"oldImage", "->", "newImage"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Export", "[", 
       RowBox[{"txtFile", ",", "newContent"}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"RenameFile", "[", 
       RowBox[{"txtFile", ",", "file"}], "]"}], ";"}]}], 
    "\[IndentingNewLine]", "]"}], ";"}]}]], "Input",
 CellChangeTimes->{{3.929377511216282*^9, 3.9293775228627305`*^9}, 
   3.929377588982523*^9, {3.929377683881672*^9, 3.9293776850002003`*^9}, {
   3.9293778556915264`*^9, 3.929377876090268*^9}, {3.929378777353448*^9, 
   3.9293788444966807`*^9}, {3.9293789393296213`*^9, 3.929378940940494*^9}, {
   3.929379214624132*^9, 3.9293792240799265`*^9}, {3.9293794694537277`*^9, 
   3.9293795589252295`*^9}, {3.929379659675088*^9, 3.9293796681032567`*^9}, {
   3.929643642735235*^9, 3.929643694374076*^9}, {3.9296437774331036`*^9, 
   3.9296438249989753`*^9}, {3.9296439122368956`*^9, 
   3.9296439348679047`*^9}, {3.929644139474827*^9, 3.929644154210293*^9}, {
   3.9296442289198885`*^9, 3.929644235145958*^9}, {3.9296443482368026`*^9, 
   3.9296443940710073`*^9}, {3.929644755607081*^9, 3.9296448078714094`*^9}, {
   3.92964485316043*^9, 3.929644856250193*^9}, 3.9296450090244255`*^9, {
   3.9296452440163617`*^9, 3.929645247200281*^9}, {3.9301538068029904`*^9, 
   3.9301539473875127`*^9}, {3.9301539998510747`*^9, 3.930154028223132*^9}, {
   3.930154075195853*^9, 3.930154090837496*^9}, 3.9301579515104103`*^9, {
   3.9301579924895425`*^9, 3.930157997490374*^9}, {3.9301580624455137`*^9, 
   3.930158096005273*^9}, {3.930158152649557*^9, 3.9301581565018206`*^9}, {
   3.9301582437562428`*^9, 3.930158358454812*^9}, {3.930158578889846*^9, 
   3.930158602716262*^9}, {3.9301586331905985`*^9, 3.930158637980011*^9}, {
   3.9301587780743427`*^9, 3.9301587844855614`*^9}, {3.930159032510434*^9, 
   3.930159071271784*^9}, {3.930159133992364*^9, 3.9301591347471724`*^9}, {
   3.930159308722345*^9, 3.9301593096839943`*^9}},
 CellLabel->"In[3]:=",ExpressionUUID->"1cb92565-49b8-449d-92b1-a7ca5d8cb900"],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[
  RowBox[{
  "1", "\[InvisibleSpace]", "\<\". \"\>", 
   "\[InvisibleSpace]", \
"\<\"C:\\\\Users\\\\korol\\\\YandexDisk\\\\Hugo\\\\project\\\\tinydev\\\\\
content\\\\posts\\\\info 1.md\"\>"}],
  SequenceForm[
  1, ". ", "C:\\Users\\korol\\YandexDisk\\Hugo\\project\\tinydev\\content\\\
posts\\info 1.md"],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.930158726508911*^9, 3.930158993937003*^9, {3.930159049540325*^9, 
   3.9301590767596607`*^9}, 3.9301655074428487`*^9},
 CellLabel->
  "During evaluation of \
In[3]:=",ExpressionUUID->"b887e048-8a74-43f8-bea2-1db58df44684"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"oldImage = \"\>", 
   "\[InvisibleSpace]", "\<\"knoxwelle__2016-11-19T135513.000Z.jpg\"\>"}],
  SequenceForm["oldImage = ", "knoxwelle__2016-11-19T135513.000Z.jpg"],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.930158726508911*^9, 3.930158993937003*^9, {3.930159049540325*^9, 
   3.9301590767596607`*^9}, 3.930165507882779*^9},
 CellLabel->
  "During evaluation of \
In[3]:=",ExpressionUUID->"e60234c9-4f9a-4a3a-871d-cb06f5bee777"]
}, Open  ]],

Cell[BoxData[
 TemplateBox[{
  "RandomChoice", "lrwl", 
   "\"The items for choice \\!\\(\\*RowBox[{\\\"{\\\", \\\"}\\\"}]\\) should \
be a non-empty list or a rule weights -> choices.\"", 2, 3, 1, 
   17525939571989360371, "Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellChangeTimes->{3.930165508542981*^9},
 CellLabel->
  "During evaluation of \
In[3]:=",ExpressionUUID->"d59276fa-3ace-42ad-86c9-4517a9419278"],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"newImage = \"\>", "\[InvisibleSpace]", 
   RowBox[{"FileNameTake", "[", 
    RowBox[{"RandomChoice", "[", 
     RowBox[{"{", "}"}], "]"}], "]"}]}],
  SequenceForm["newImage = ", 
   FileNameTake[
    RandomChoice[{}]]],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.930158726508911*^9, 3.930158993937003*^9, {3.930159049540325*^9, 
   3.9301590767596607`*^9}, 3.9301655091143503`*^9},
 CellLabel->
  "During evaluation of \
In[3]:=",ExpressionUUID->"03c6ec82-9e11-465b-b801-2d6ca296c20f"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{
  "2", "\[InvisibleSpace]", "\<\". \"\>", 
   "\[InvisibleSpace]", \
"\<\"C:\\\\Users\\\\korol\\\\YandexDisk\\\\Hugo\\\\project\\\\tinydev\\\\\
content\\\\posts\\\\info 2.md\"\>"}],
  SequenceForm[
  2, ". ", "C:\\Users\\korol\\YandexDisk\\Hugo\\project\\tinydev\\content\\\
posts\\info 2.md"],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.930158726508911*^9, 3.930158993937003*^9, {3.930159049540325*^9, 
   3.9301590767596607`*^9}, 3.930165509175253*^9},
 CellLabel->
  "During evaluation of \
In[3]:=",ExpressionUUID->"d7871471-6923-446e-a180-e470ca3f4586"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"oldImage = \"\>", 
   "\[InvisibleSpace]", "\<\"knoxwelle__2016-11-19T135513.000Z.jpg\"\>"}],
  SequenceForm["oldImage = ", "knoxwelle__2016-11-19T135513.000Z.jpg"],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.930158726508911*^9, 3.930158993937003*^9, {3.930159049540325*^9, 
   3.9301590767596607`*^9}, 3.9301655092600307`*^9},
 CellLabel->
  "During evaluation of \
In[3]:=",ExpressionUUID->"8aa8d626-679a-465b-b933-5c6271fcc3c4"]
}, Open  ]],

Cell[BoxData[
 TemplateBox[{
  "RandomChoice", "lrwl", 
   "\"The items for choice \\!\\(\\*RowBox[{\\\"{\\\", \\\"}\\\"}]\\) should \
be a non-empty list or a rule weights -> choices.\"", 2, 3, 2, 
   17525939571989360371, "Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellChangeTimes->{3.9301655093061566`*^9},
 CellLabel->
  "During evaluation of \
In[3]:=",ExpressionUUID->"24c81889-a45b-4de4-9c3d-917b67769729"],

Cell[CellGroupData[{

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"newImage = \"\>", "\[InvisibleSpace]", 
   RowBox[{"FileNameTake", "[", 
    RowBox[{"RandomChoice", "[", 
     RowBox[{"{", "}"}], "]"}], "]"}]}],
  SequenceForm["newImage = ", 
   FileNameTake[
    RandomChoice[{}]]],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.930158726508911*^9, 3.930158993937003*^9, {3.930159049540325*^9, 
   3.9301590767596607`*^9}, 3.9301655097190332`*^9},
 CellLabel->
  "During evaluation of \
In[3]:=",ExpressionUUID->"160900f9-18a1-4877-9c12-23123b29bccb"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{
  "3", "\[InvisibleSpace]", "\<\". \"\>", 
   "\[InvisibleSpace]", \
"\<\"C:\\\\Users\\\\korol\\\\YandexDisk\\\\Hugo\\\\project\\\\tinydev\\\\\
content\\\\posts\\\\info.md\"\>"}],
  SequenceForm[
  3, ". ", "C:\\Users\\korol\\YandexDisk\\Hugo\\project\\tinydev\\content\\\
posts\\info.md"],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.930158726508911*^9, 3.930158993937003*^9, {3.930159049540325*^9, 
   3.9301590767596607`*^9}, 3.930165509756025*^9},
 CellLabel->
  "During evaluation of \
In[3]:=",ExpressionUUID->"5808d57c-d800-42df-a862-0ea4a1331d40"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"oldImage = \"\>", 
   "\[InvisibleSpace]", "\<\"knoxwelle__2016-11-19T135513.000Z.jpg\"\>"}],
  SequenceForm["oldImage = ", "knoxwelle__2016-11-19T135513.000Z.jpg"],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.930158726508911*^9, 3.930158993937003*^9, {3.930159049540325*^9, 
   3.9301590767596607`*^9}, 3.9301655098666534`*^9},
 CellLabel->
  "During evaluation of \
In[3]:=",ExpressionUUID->"0d63f35f-19f2-400c-9416-a49229ad6c60"]
}, Open  ]],

Cell[BoxData[
 TemplateBox[{
  "RandomChoice", "lrwl", 
   "\"The items for choice \\!\\(\\*RowBox[{\\\"{\\\", \\\"}\\\"}]\\) should \
be a non-empty list or a rule weights -> choices.\"", 2, 3, 3, 
   17525939571989360371, "Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellChangeTimes->{3.9301655099086895`*^9},
 CellLabel->
  "During evaluation of \
In[3]:=",ExpressionUUID->"c371ce09-eab5-43e0-a41a-59be838cf80e"],

Cell[BoxData[
 TemplateBox[{
  "General", "stop", 
   "\"Further output of \\!\\(\\*StyleBox[RowBox[{\\\"RandomChoice\\\", \
\\\"::\\\", \\\"lrwl\\\"}], \\\"MessageName\\\"]\\) will be suppressed during \
this calculation.\"", 2, 3, 4, 17525939571989360371, "Local"},
  "MessageTemplate"]], "Message", "MSG",
 CellChangeTimes->{3.930165510185566*^9},
 CellLabel->
  "During evaluation of \
In[3]:=",ExpressionUUID->"5022f5ce-891b-4554-9edc-3ccd84a38854"],

Cell[BoxData[
 InterpretationBox[
  RowBox[{"\<\"newImage = \"\>", "\[InvisibleSpace]", 
   RowBox[{"FileNameTake", "[", 
    RowBox[{"RandomChoice", "[", 
     RowBox[{"{", "}"}], "]"}], "]"}]}],
  SequenceForm["newImage = ", 
   FileNameTake[
    RandomChoice[{}]]],
  Editable->False]], "Print",
 CellChangeTimes->{
  3.930158726508911*^9, 3.930158993937003*^9, {3.930159049540325*^9, 
   3.9301590767596607`*^9}, 3.930165510317828*^9},
 CellLabel->
  "During evaluation of \
In[3]:=",ExpressionUUID->"6e46001f-06f0-4a3f-b5c3-98d5e2fabc08"]
}, Open  ]]
},
WindowSize->{466.5, 687.75},
WindowMargins->{{Automatic, 298.5}, {Automatic, 0}},
FrontEndVersion->"13.0 for Microsoft Windows (64-bit) (December 2, 2021)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"45bbeab9-7a51-44f3-bf5f-98f36fe76e0b"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 525, 13, 89, "Input",ExpressionUUID->"7241a640-e92e-4cb9-a883-fbb4ed6d4dc7"],
Cell[1108, 37, 1220, 19, 122, "Output",ExpressionUUID->"faef13aa-483b-4a41-9d28-ffa3cd3e65d5"]
}, Open  ]],
Cell[2343, 59, 769, 17, 59, "Input",ExpressionUUID->"6df45464-0afb-4d19-81ce-421adcd33e53"],
Cell[CellGroupData[{
Cell[3137, 80, 5087, 107, 639, "Input",ExpressionUUID->"1cb92565-49b8-449d-92b1-a7ca5d8cb900"],
Cell[CellGroupData[{
Cell[8249, 191, 616, 16, 18, "Print",ExpressionUUID->"b887e048-8a74-43f8-bea2-1db58df44684"],
Cell[8868, 209, 489, 11, 18, "Print",ExpressionUUID->"e60234c9-4f9a-4a3a-871d-cb06f5bee777"]
}, Open  ]],
Cell[9372, 223, 420, 10, 22, "Message",ExpressionUUID->"d59276fa-3ace-42ad-86c9-4517a9419278"],
Cell[CellGroupData[{
Cell[9817, 237, 545, 15, 18, "Print",ExpressionUUID->"03c6ec82-9e11-465b-b801-2d6ca296c20f"],
Cell[10365, 254, 614, 16, 18, "Print",ExpressionUUID->"d7871471-6923-446e-a180-e470ca3f4586"],
Cell[10982, 272, 491, 11, 18, "Print",ExpressionUUID->"8aa8d626-679a-465b-b933-5c6271fcc3c4"]
}, Open  ]],
Cell[11488, 286, 422, 10, 22, "Message",ExpressionUUID->"24c81889-a45b-4de4-9c3d-917b67769729"],
Cell[CellGroupData[{
Cell[11935, 300, 545, 15, 18, "Print",ExpressionUUID->"160900f9-18a1-4877-9c12-23123b29bccb"],
Cell[12483, 317, 610, 16, 18, "Print",ExpressionUUID->"5808d57c-d800-42df-a862-0ea4a1331d40"],
Cell[13096, 335, 491, 11, 18, "Print",ExpressionUUID->"0d63f35f-19f2-400c-9416-a49229ad6c60"]
}, Open  ]],
Cell[13602, 349, 422, 10, 22, "Message",ExpressionUUID->"c371ce09-eab5-43e0-a41a-59be838cf80e"],
Cell[14027, 361, 454, 10, 22, "Message",ExpressionUUID->"5022f5ce-891b-4554-9edc-3ccd84a38854"],
Cell[14484, 373, 543, 15, 18, "Print",ExpressionUUID->"6e46001f-06f0-4a3f-b5c3-98d5e2fabc08"]
}, Open  ]]
}
]
*)

